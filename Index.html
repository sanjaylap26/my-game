<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Click Speed Test</title>

  <link rel="stylesheet" href="Style.css">
  <!--
    Simple, clean CSS. Save as an external file later if you want.
    The design is responsive and mobile-friendly.
  -->
  <style>
    :root{
      --bg:#0f1724;
      --card:#111827;
      --accent:#06b6d4;
      --muted:#94a3b8;
      --white:#fff;
    }
    html,body{
      margin:0;
      height:100%;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg),#071126 140%);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      box-sizing:border-box;
    }
    .card{
      width:100%;
      max-width:760px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:28px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
    }

    header h1{
      margin:0 0 6px 0;
      font-size:22px;
      letter-spacing:0.2px;
    }
    header p{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:14px;
    }

    .top-row{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:18px;
      flex-wrap:wrap;
    }

    .stat {
      background: rgba(255,255,255,0.02);
      padding:10px 14px;
      border-radius:8px;
      min-width:120px;
      text-align:center;
      border:1px solid rgba(255,255,255,0.02);
    }
    .stat .label { color:var(--muted); font-size:12px; }
    .stat .value { font-weight:700; font-size:18px; margin-top:6px; }

    /* big click button */
    .click-area{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }
    .click-button{
      background:var(--accent);
      color:#022;
      border: none;
      padding:30px 44px;
      border-radius:12px;
      font-size:28px;
      font-weight:700;
      cursor:pointer;
      transition:transform .06s ease, box-shadow .06s;
      box-shadow: 0 6px 20px rgba(6,182,212,0.12);
      user-select:none;
    }
    .click-button:active{ transform:translateY(2px) scale(.997); }
    .click-button[disabled]{
      opacity:0.6;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .btn{
      padding:10px 14px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.04);
      background:transparent;
      color:var(--white);
      cursor:pointer;
    }

    .notice{ color:var(--muted); font-size:13px; margin-top:12px; text-align:center; }

    footer{
      margin-top:18px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    small{ color:var(--muted); font-size:12px; }
    @media (max-width:540px){
      .click-button{ padding:22px 28px; font-size:22px; }
      .stat{ min-width:100px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" role="main" aria-labelledby="game-title">
      <header>
        <h1 id="game-title">âš¡ Click Speed Test</h1>
        <p>Click as many times as you can within the chosen time. Works on mobile and desktop.</p>
      </header>

      <!-- top stats -->
      <div class="top-row" aria-hidden="false">
        <div class="stat" title="Remaining time">
          <div class="label">Time left</div>
          <div class="value" id="time">5.0s</div>
        </div>
        <div class="stat" title="Current click count">
          <div class="label">Clicks</div>
          <div class="value" id="count">0</div>
        </div>
        <div class="stat" title="Best score saved in browser">
          <div class="label">High score</div>
          <div class="value" id="high">0</div>
        </div>
      </div>

      <!-- main click area -->
      <section class="click-area" aria-live="polite">
        <!-- This big button is the one user clicks rapidly -->
        <button id="clickBtn" class="click-button" disabled aria-pressed="false">
          Click Me!
        </button>
      </section>

      <!-- controls -->
      <div class="controls" role="toolbar" aria-label="Game controls">
        <button id="startBtn" class="btn" aria-label="Start the game">Start (5s)</button>
        <button id="restartBtn" class="btn" aria-label="Restart game">Restart</button>

        <!-- difficulty: choose 5/10/15 seconds -->
        <label style="display:flex;align-items:center;gap:6px;color:var(--muted);font-size:13px;margin-left:6px;">
          <span>Time:</span>
          <select id="durationSelect" aria-label="Game duration">
            <option value="5">5s</option>
            <option value="10">10s</option>
            <option value="15">15s</option>
          </select>
        </label>
      </div>

      <p class="notice" id="message" aria-live="polite">Press <strong>Start</strong> to begin. You can also press <kbd>Space</kbd> or <kbd>Enter</kbd> to click the big button while the game runs.</p>

      <footer>
        <small>Made by Sanjay â€¢ Save uses localStorage</small>
        <small id="result" aria-live="polite"></small>
      </footer>
    </main>
  </div>

  <!--
    Script: all game logic.
    - Uses setInterval for a smooth countdown (shows tenths).
    - Saves high score in localStorage under key: clickSpeedHighScore
    - Keyboard support: when game running, Space or Enter triggers a click.
  -->
  <script>
    (function(){
      // --- elements
      const timeEl = document.getElementById('time');
      const countEl = document.getElementById('count');
      const highEl = document.getElementById('high');
      const clickBtn = document.getElementById('clickBtn');
      const startBtn = document.getElementById('startBtn');
      const restartBtn = document.getElementById('restartBtn');
      const resultEl = document.getElementById('result');
      const messageEl = document.getElementById('message');
      const durationSelect = document.getElementById('durationSelect');

      // --- state
      let duration = parseInt(durationSelect.value, 10) || 5; // seconds
      let remaining = duration;
      let clicks = 0;
      let timerInterval = null;
      let running = false;
      const STORAGE_KEY = 'clickSpeedHighScore';

      // load high score
      function loadHighScore(){
        const v = parseInt(localStorage.getItem(STORAGE_KEY), 10);
        return Number.isFinite(v) ? v : 0;
      }
      function saveHighScore(score){
        localStorage.setItem(STORAGE_KEY, String(score));
      }

      // initialize UI values
      highEl.textContent = loadHighScore();
      countEl.textContent = '0';
      timeEl.textContent = duration.toFixed(1) + 's';
      resultEl.textContent = '';

      // enable/disable click button based on state
      function setClickEnabled(on){
        clickBtn.disabled = !on;
        clickBtn.setAttribute('aria-pressed', String(on));
      }

      // update timer display (one decimal)
      function updateTimeDisplay(){
        timeEl.textContent = remaining.toFixed(1) + 's';
      }

      // start game
      function startGame(){
        if (running) return;
        duration = parseInt(durationSelect.value, 10) || 5;
        remaining = duration;
        clicks = 0;
        running = true;
        setClickEnabled(true);
        countEl.textContent = '0';
        updateTimeDisplay();
        resultEl.textContent = '';
        messageEl.textContent = 'Game running â€” click as fast as you can!';

        // use interval every 100ms for smooth tenths display
        timerInterval = setInterval(()=>{
          remaining -= 0.1;
          if (remaining <= 0){
            remaining = 0;
            updateTimeDisplay();
            endGame();
          } else {
            updateTimeDisplay();
          }
        }, 100);
      }

      // end game
      function endGame(){
        if (!running) return;
        running = false;
        clearInterval(timerInterval);
        timerInterval = null;
        setClickEnabled(false);
        // show result
        resultEl.textContent = `Final score: ${clicks}`;
        messageEl.textContent = `Time's up! You clicked ${clicks} times.`;

        // high score logic
        const currentHigh = loadHighScore();
        if (clicks > currentHigh){
          saveHighScore(clicks);
          highEl.textContent = clicks;
          messageEl.textContent += ' ðŸŽ‰ New high score!';
        }
      }

      // restart (reset)
      function restartGame(){
        clearInterval(timerInterval);
        timerInterval = null;
        running = false;
        duration = parseInt(durationSelect.value, 10) || 5;
        remaining = duration;
        clicks = 0;
        countEl.textContent = '0';
        updateTimeDisplay();
        setClickEnabled(false);
        resultEl.textContent = '';
        messageEl.textContent = 'Press Start to play again.';
      }

      // attach events
      clickBtn.addEventListener('click', ()=>{
        if (!running) return;
        clicks++;
        countEl.textContent = String(clicks);
      });

      startBtn.addEventListener('click', startGame);
      restartBtn.addEventListener('click', restartGame);

      // update duration when changed (also resets)
      durationSelect.addEventListener('change', ()=>{
        restartGame();
        duration = parseInt(durationSelect.value, 10) || 5;
        timeEl.textContent = duration.toFixed(1) + 's';
      });

      // keyboard support: Space or Enter counts as a click when game running
      window.addEventListener('keydown', (e)=>{
        if (!running) return;
        if (e.code === 'Space' || e.code === 'Enter'){
          // prevent page scroll on space
          e.preventDefault();
          // simulate click
          clickBtn.click();
        }
      });

      // accessibility: allow focusing and pressing Enter on the big button
      clickBtn.addEventListener('keyup', (e)=>{
        if (!running) return;
        if (e.key === 'Enter' || e.key === ' '){
          clickBtn.click();
        }
      });

      // safety: if the window/tab loses focus while running, pause timer (optional)
      // (commented out â€” you can enable if you want)
      // window.addEventListener('blur', () => {
      //   if (running) { clearInterval(timerInterval); }
      // });
      // window.addEventListener('focus', () => {
      //   if (running && !timerInterval) { timerInterval = setInterval(...); }
      // });

      // When page loads ensure button is disabled until start
      setClickEnabled(false);
    })();
  </script>
</body>
</html>

